---
import {
  Icon,
} from 'astro-icon/components';
---

<header class="fixed w-full p-4 top-0 z-50 backdrop-blur-sm">
  <div class="mx-auto max-w-3xl">
    <nav class="flex items-center gap-3 text-base">
      <a href="/" class="group">
        <h2 class="font-semibold tracking-tighter">
          My Portfolio
        </h2>
      </a>
      <div class="flex-grow"></div>
      <a href="/projects" class="text-sm font-medium hover:underline">Projects</a>
      <a href="/translations" class="text-sm font-medium hover:underline">Translations</a>
      <a href="/reflections" class="text-sm font-medium hover:underline">Reflections</a>
      <button id="theme-toggle" class="text-sm font-medium hover:underline">
        <Icon name="sun" class="w-6 h-6 block dark:hidden" />
        <Icon name="moon" class="w-6 h-6 hidden dark:block" />
      </button>
    </nav>
  </div>
</header>

<script>
  const themeToggle = document.getElementById('theme-toggle');
  const html = document.documentElement;

  // On page load or when changing themes, best to add inline in `head` to avoid FOUC
  if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      html.classList.add('dark');
  } else {
      html.classList.remove('dark')
  }

  themeToggle.addEventListener('click', () => {
    html.classList.toggle('dark');
    const isDark = html.classList.contains('dark');
    localStorage.setItem('color-theme', isDark ? 'dark' : 'light');
  });
</script>